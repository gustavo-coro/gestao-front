import{a as x,b as C,c as ut}from"./chunk-UQLF6CA5.js";import"./chunk-JKG6SBN7.js";import{a as et,b as nt,c as it,d as at,e as ot,f as rt,g as mt,h as lt,i as pt,j as st,k as ct,l as dt}from"./chunk-QR3VN75N.js";import"./chunk-EKXEQYR4.js";import"./chunk-RK5QYF4B.js";import"./chunk-2AMZF5UH.js";import{A as W,B as J,F as q,G,b as k,f as N,i as j,r as H,t as B,x as Q}from"./chunk-7FJALMHQ.js";import{a as A,f as z,g as tt}from"./chunk-XAYXIGTK.js";import{d as R}from"./chunk-GN7WWOTY.js";import{Ab as u,Da as l,Db as v,Eb as I,Fb as D,Ha as y,Hb as T,Ib as O,Jb as $,Oa as S,Ta as p,Za as s,ad as K,cd as U,dd as X,ed as Y,fc as F,fd as Z,gb as o,ha as b,hb as a,ia as M,ib as g,jb as c,jc as V,kb as d,mb as w,ob as _,pb as h,tb as E,ub as L,vb as P,zb as r}from"./chunk-4P6AN2NL.js";var gt=()=>[5,10,25,100],Ct=t=>["/empresa",t];function _t(t,n){if(t&1){let i=w();o(0,"button",26),_("click",function(){b(i);let m=h();return M(m.clearFilter())}),o(1,"mat-icon"),r(2,"close"),a()()}}function ht(t,n){t&1&&(o(0,"th",27),r(1,"Nome"),a())}function xt(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit;l(),u(i.nome_empresa)}}function bt(t,n){t&1&&(o(0,"th",27),r(1,"CNPJ"),a())}function Mt(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit,e=h();l(),u(e.formatCnpjForDisplay(i.cnpj_empresa))}}function yt(t,n){t&1&&(o(0,"th",27),r(1,"Raz\xE3o Social"),a())}function St(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit;l(),u(i.razao_social)}}function wt(t,n){t&1&&(o(0,"th",27),r(1,"Email"),a())}function Et(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit;l(),u(i.email)}}function Lt(t,n){t&1&&(o(0,"th",27),r(1,"Telefone"),a())}function Pt(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit;l(),u(i.telefone)}}function vt(t,n){t&1&&(o(0,"th",29),r(1,"Endere\xE7o"),a())}function It(t,n){if(t&1&&(o(0,"td",28),r(1),a()),t&2){let i=n.$implicit;l(),u(i.endereco)}}function Dt(t,n){t&1&&(o(0,"th",30),r(1,"A\xE7\xF5es"),a())}function Tt(t,n){if(t&1&&(o(0,"td",31)(1,"button",32)(2,"mat-icon"),r(3,"edit"),a()()()),t&2){let i=n.$implicit;l(),s("routerLink",$(1,Ct,i.cnpj_empresa))}}function Ot(t,n){t&1&&g(0,"tr",33)}function $t(t,n){t&1&&g(0,"tr",34)}function Ft(t,n){t&1&&(o(0,"div",35)(1,"mat-icon"),r(2,"search_off"),a(),o(3,"p"),r(4,"Nenhuma empresa encontrada com o filtro aplicado."),a()())}function Vt(t,n){t&1&&(o(0,"div",35)(1,"mat-icon"),r(2,"business"),a(),o(3,"p"),r(4,"Nenhuma empresa cadastrada."),a()())}function Rt(){let t=new x;return t.itemsPerPageLabel="Itens por p\xE1gina:",t.nextPageLabel="Pr\xF3xima p\xE1gina",t.previousPageLabel="P\xE1gina anterior",t.firstPageLabel="Primeira p\xE1gina",t.lastPageLabel="\xDAltima p\xE1gina",t.getRangeLabel=(n,i,e)=>{if(e===0||i===0)return`0 de ${e}`;e=Math.max(e,0);let m=n*i,f=m<e?Math.min(m+i,e):m+i;return`${m+1} - ${f} de ${e}`},t}var ft=class t{constructor(n){this.api=n}dataSource=new dt([]);originalCompanies=[];filterValue="";columns=["nome_empresa","cnpj_empresa","razao_social","email","telefone","endereco","actions"];paginator;ngOnInit(){this.api.getCompanies().subscribe(n=>{this.originalCompanies=n,this.dataSource.data=n,this.paginator&&(this.dataSource.paginator=this.paginator)})}ngAfterViewInit(){this.dataSource.data.length>0&&!this.dataSource.paginator&&this.paginator?this.dataSource.paginator=this.paginator:!this.dataSource.paginator&&this.paginator&&(this.dataSource.paginator=this.paginator)}formatCnpjForDisplay(n){if(!n)return"";let i=String(n).replace(/\D/g,"");if(i.length===0)return"";let e=i.substring(0,14),m=e;return e.length>12?m=`${e.substring(0,2)}.${e.substring(2,5)}.${e.substring(5,8)}/${e.substring(8,12)}-${e.substring(12,14)}`:e.length>8?m=`${e.substring(0,2)}.${e.substring(2,5)}.${e.substring(5,8)}/${e.substring(8)}`:e.length>5?m=`${e.substring(0,2)}.${e.substring(2,5)}.${e.substring(5)}`:e.length>2&&(m=`${e.substring(0,2)}.${e.substring(2)}`),m}applyFilter(){let n=this.filterValue.trim().toLowerCase();n?this.dataSource.data=this.originalCompanies.filter(i=>i.nome_empresa?.toLowerCase().includes(n)||i.cnpj_empresa?.toLowerCase().includes(n)||i.email?.toLowerCase().includes(n)||i.telefone?.toLowerCase().includes(n)):this.dataSource.data=this.originalCompanies,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}clearFilter(){this.filterValue="",this.applyFilter()}static \u0275fac=function(i){return new(i||t)(y(tt))};static \u0275cmp=S({type:t,selectors:[["app-company-list"]],viewQuery:function(i,e){if(i&1&&E(C,5),i&2){let m;L(m=P())&&(e.paginator=m.first)}},features:[T([{provide:x,useValue:Rt()}])],decls:44,vars:9,consts:[[1,"list-card"],[1,"header"],["mat-raised-button","","color","primary","routerLink","/empresa/new",1,"new-button"],[1,"filter-container"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","Nome, CNPJ, Email ou Telefone",3,"ngModelChange","input","ngModel"],["matSuffix",""],["mat-icon-button","","matSuffix","","aria-label","Limpar filtro",3,"click",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",1,"full-table","mat-elevation-z4",3,"dataSource"],["matColumnDef","nome_empresa"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cnpj_empresa"],["matColumnDef","razao_social"],["matColumnDef","email"],["matColumnDef","telefone"],["matColumnDef","endereco"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Selecione a p\xE1gina de empresas",3,"pageSizeOptions"],["class","no-results",4,"ngIf"],["mat-icon-button","","matSuffix","","aria-label","Limpar filtro",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-icon-button","","matTooltip","Editar Empresa","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"no-results"]],template:function(i,e){i&1&&(o(0,"mat-card",0)(1,"div",1)(2,"h2"),r(3,"Empresas"),a(),o(4,"button",2)(5,"mat-icon"),r(6,"add"),a(),r(7," Nova Empresa "),a()(),o(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),r(11,"Buscar Empresa"),a(),o(12,"input",5),D("ngModelChange",function(f){return I(e.filterValue,f)||(e.filterValue=f),f}),_("input",function(){return e.applyFilter()}),a(),o(13,"mat-icon",6),r(14,"search"),a(),p(15,_t,3,0,"button",7),a()(),o(16,"div",8)(17,"table",9),c(18,10),p(19,ht,2,0,"th",11)(20,xt,2,1,"td",12),d(),c(21,13),p(22,bt,2,0,"th",11)(23,Mt,2,1,"td",12),d(),c(24,14),p(25,yt,2,0,"th",11)(26,St,2,1,"td",12),d(),c(27,15),p(28,wt,2,0,"th",11)(29,Et,2,1,"td",12),d(),c(30,16),p(31,Lt,2,0,"th",11)(32,Pt,2,1,"td",12),d(),c(33,17),p(34,vt,2,0,"th",18)(35,It,2,1,"td",12),d(),c(36,19),p(37,Dt,2,0,"th",20)(38,Tt,4,3,"td",21),d(),p(39,Ot,1,0,"tr",22)(40,$t,1,0,"tr",23),a(),g(41,"mat-paginator",24),a(),p(42,Ft,5,0,"div",25)(43,Vt,5,0,"div",25),a()),i&2&&(l(12),v("ngModel",e.filterValue),l(3),s("ngIf",e.filterValue),l(2),s("dataSource",e.dataSource),l(22),s("matHeaderRowDef",e.columns),l(),s("matRowDefColumns",e.columns),l(),s("pageSizeOptions",O(8,gt)),l(),s("ngIf",e.dataSource.data.length===0&&e.originalCompanies.length>0),l(),s("ngIf",e.dataSource.data.length===0&&e.originalCompanies.length===0))},dependencies:[V,F,z,A,ct,et,it,mt,at,nt,lt,ot,rt,pt,st,X,U,K,Z,Y,R,H,k,N,j,J,W,B,Q,G,q,ut,C],styles:[".list-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin:16px;box-shadow:0 4px 20px #00000014}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid rgba(67,97,238,.1)}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.8rem;margin:0}.new-button[_ngcontent-%COMP%]{background:var(--gradient-primary);color:#fff!important;padding:0 24px;height:44px;font-weight:500}.filter-container[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;background:#4361ee0d;padding:16px;border-radius:12px}.filter-field[_ngcontent-%COMP%]{flex:1}.table-container[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;margin:24px 0;box-shadow:0 2px 16px #00000014}.full-table[_ngcontent-%COMP%]{width:100%}.mat-sort-header-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.mat-sort-header-arrow[_ngcontent-%COMP%]{color:#fff!important}.no-results[_ngcontent-%COMP%]{text-align:center;padding:32px;color:var(--text-secondary);font-size:1.1rem}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.6}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.text-center[_ngcontent-%COMP%]{text-align:center}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.new-button[_ngcontent-%COMP%]{width:100%}.filter-container[_ngcontent-%COMP%]{flex-direction:column}.filter-field[_ngcontent-%COMP%]{width:100%}}"]})};export{ft as CompanyListComponent};
