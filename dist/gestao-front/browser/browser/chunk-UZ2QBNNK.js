import{a as b,b as C,c as dt}from"./chunk-UQLF6CA5.js";import"./chunk-JKG6SBN7.js";import{a as et,b as it,c as nt,d as at,e as ot,f as rt,g as lt,h as mt,i as st,j as ct,k as pt,l as ut}from"./chunk-QR3VN75N.js";import"./chunk-EKXEQYR4.js";import"./chunk-RK5QYF4B.js";import"./chunk-2AMZF5UH.js";import{A as W,B as J,F as q,G,b as R,f as N,i as j,r as H,t as z,x as Q}from"./chunk-7FJALMHQ.js";import{a as A,f as B,g as tt}from"./chunk-XAYXIGTK.js";import{d as k}from"./chunk-GN7WWOTY.js";import{Ab as f,Da as s,Db as y,Eb as D,Fb as $,Ha as S,Hb as T,Ib as I,Jb as O,Oa as w,Ta as c,Za as p,ad as K,cd as U,dd as X,ed as Y,fc as F,fd as Z,gb as o,ha as x,hb as a,ia as M,ib as g,jb as u,jc as V,kb as d,mb as L,ob as _,pb as h,tb as P,ub as E,vb as v,zb as r}from"./chunk-4P6AN2NL.js";var gt=()=>[10,20,50],Ct=t=>["/clientes",t];function _t(t,e){if(t&1){let n=L();o(0,"button",25),_("click",function(){x(n);let i=h();return M(i.clearFilter())}),o(1,"mat-icon"),r(2,"close"),a()()}}function ht(t,e){t&1&&(o(0,"th",26),r(1,"Nome"),a())}function bt(t,e){if(t&1&&(o(0,"td",27),r(1),a()),t&2){let n=e.$implicit;s(),f(n.nome)}}function xt(t,e){t&1&&(o(0,"th",26),r(1,"CPF/CNPJ"),a())}function Mt(t,e){if(t&1&&(o(0,"td",27),r(1),a()),t&2){let n=e.$implicit,l=h();s(),f(l.formatCpfCnpjForDisplay(n.cpf_cnpj))}}function St(t,e){t&1&&(o(0,"th",26),r(1,"E-mail"),a())}function wt(t,e){if(t&1&&(o(0,"td",27),r(1),a()),t&2){let n=e.$implicit;s(),f(n.email)}}function Lt(t,e){t&1&&(o(0,"th",26),r(1,"Telefone"),a())}function Pt(t,e){if(t&1&&(o(0,"td",27),r(1),a()),t&2){let n=e.$implicit;s(),f(n.telefone)}}function Et(t,e){t&1&&(o(0,"th",28),r(1,"Endere\xE7o"),a())}function vt(t,e){if(t&1&&(o(0,"td",27),r(1),a()),t&2){let n=e.$implicit;s(),f(n.endereco)}}function yt(t,e){t&1&&(o(0,"th",29),r(1,"A\xE7\xF5es"),a())}function Dt(t,e){if(t&1&&(o(0,"td",30)(1,"button",31)(2,"mat-icon"),r(3,"edit"),a()()()),t&2){let n=e.$implicit;s(),p("routerLink",O(1,Ct,n.cpf_cnpj))}}function $t(t,e){t&1&&g(0,"tr",32)}function Tt(t,e){t&1&&g(0,"tr",33)}function It(t,e){t&1&&(o(0,"div",34)(1,"mat-icon"),r(2,"search_off"),a(),o(3,"p"),r(4,"Nenhum cliente encontrado com o filtro aplicado."),a()())}function Ot(){let t=new b;return t.itemsPerPageLabel="Itens por p\xE1gina:",t.nextPageLabel="Pr\xF3xima p\xE1gina",t.previousPageLabel="P\xE1gina anterior",t.firstPageLabel="Primeira p\xE1gina",t.lastPageLabel="\xDAltima p\xE1gina",t.getRangeLabel=(e,n,l)=>`${e*n+1} - ${Math.min((e+1)*n,l)} de ${l}`,t}var ft=class t{constructor(e){this.api=e}dataSource=new ut;originalCustomers=[];filterValue="";columns=["nome","email","cpf_cnpj","telefone","endereco","actions"];paginator;ngOnInit(){this.api.getCustomers().subscribe(e=>{this.originalCustomers=e,this.dataSource.data=e,this.paginator&&(this.dataSource.paginator=this.paginator)})}ngAfterViewInit(){this.dataSource.data.length>0&&!this.dataSource.paginator&&this.paginator?this.dataSource.paginator=this.paginator:!this.dataSource.paginator&&this.paginator&&(this.dataSource.paginator=this.paginator)}loadCustomers(){this.api.getCustomers().subscribe({next:e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator},error:e=>console.error("Erro ao carregar os clientes",e)})}formatCpfCnpjForDisplay(e){if(!e)return"";let n=String(e).replace(/\D/g,"");if(n.length===0)return"";if(n.length<=11){let i=n.substring(0,11),m=i;return i.length>9?m=`${i.substring(0,3)}.${i.substring(3,6)}.${i.substring(6,9)}-${i.substring(9)}`:i.length>6?m=`${i.substring(0,3)}.${i.substring(3,6)}.${i.substring(6)}`:i.length>3&&(m=`${i.substring(0,3)}.${i.substring(3)}`),m}else{let i=n.substring(0,14),m=i;return i.length>12?m=`${i.substring(0,2)}.${i.substring(2,5)}.${i.substring(5,8)}/${i.substring(8,12)}-${i.substring(12)}`:i.length>8?m=`${i.substring(0,2)}.${i.substring(2,5)}.${i.substring(5,8)}/${i.substring(8)}`:i.length>5?m=`${i.substring(0,2)}.${i.substring(2,5)}.${i.substring(5)}`:i.length>2&&(m=`${i.substring(0,2)}.${i.substring(2)}`),m}}applyFilter(){let e=this.filterValue.trim().toLowerCase();e?this.dataSource.data=this.originalCustomers.filter(n=>n.cpf_cnpj?.toLowerCase().includes(e)||n.nome?.toLowerCase().includes(e)||n.email?.toLowerCase().includes(e)||n.telefone?.toLowerCase().includes(e)):this.dataSource.data=this.originalCustomers,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}clearFilter(){this.filterValue="",this.applyFilter()}static \u0275fac=function(n){return new(n||t)(S(tt))};static \u0275cmp=w({type:t,selectors:[["app-customer-list"]],viewQuery:function(n,l){if(n&1&&P(C,5),n&2){let i;E(i=v())&&(l.paginator=i.first)}},features:[T([{provide:b,useValue:Ot()}])],decls:40,vars:8,consts:[[1,"list-card"],[1,"header"],["mat-raised-button","","color","primary","routerLink","/clientes/new",1,"new-button"],[1,"filter-container"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","Nome, CPF/CNPJ, Email ou Telefone",3,"ngModelChange","input","ngModel"],["matSuffix",""],["mat-icon-button","","matSuffix","","aria-label","Limpar filtro",3,"click",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",1,"full-table","mat-elevation-z4",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cpf_cnpj"],["matColumnDef","email"],["matColumnDef","telefone"],["matColumnDef","endereco"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-results",4,"ngIf"],["showFirstLastButtons","","aria-label","Selecione a p\xE1gina de clientes",3,"pageSizeOptions"],["mat-icon-button","","matSuffix","","aria-label","Limpar filtro",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary","matTooltip","Editar Cliente",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"no-results"]],template:function(n,l){n&1&&(o(0,"mat-card",0)(1,"div",1)(2,"h2"),r(3,"Clientes"),a(),o(4,"button",2)(5,"mat-icon"),r(6,"add"),a(),r(7," Novo Cliente "),a()(),o(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),r(11,"Buscar Cliente"),a(),o(12,"input",5),$("ngModelChange",function(m){return D(l.filterValue,m)||(l.filterValue=m),m}),_("input",function(){return l.applyFilter()}),a(),o(13,"mat-icon",6),r(14,"search"),a(),c(15,_t,3,0,"button",7),a()(),o(16,"div",8)(17,"table",9),u(18,10),c(19,ht,2,0,"th",11)(20,bt,2,1,"td",12),d(),u(21,13),c(22,xt,2,0,"th",11)(23,Mt,2,1,"td",12),d(),u(24,14),c(25,St,2,0,"th",11)(26,wt,2,1,"td",12),d(),u(27,15),c(28,Lt,2,0,"th",11)(29,Pt,2,1,"td",12),d(),u(30,16),c(31,Et,2,0,"th",17)(32,vt,2,1,"td",12),d(),u(33,18),c(34,yt,2,0,"th",19)(35,Dt,4,3,"td",20),d(),c(36,$t,1,0,"tr",21)(37,Tt,1,0,"tr",22),a(),c(38,It,5,0,"div",23),g(39,"mat-paginator",24),a()()),n&2&&(s(12),y("ngModel",l.filterValue),s(3),p("ngIf",l.filterValue),s(2),p("dataSource",l.dataSource),s(19),p("matHeaderRowDef",l.columns),s(),p("matRowDefColumns",l.columns),s(),p("ngIf",l.dataSource.filteredData.length===0),s(),p("pageSizeOptions",I(7,gt)))},dependencies:[V,F,B,A,pt,et,nt,lt,at,it,mt,ot,rt,st,ct,Z,Y,X,U,K,k,dt,C,G,q,W,z,Q,J,H,R,N,j],styles:[".list-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;margin:16px;box-shadow:0 4px 20px #00000014}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid rgba(67,97,238,.1)}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.8rem;margin:0}.new-button[_ngcontent-%COMP%]{background:var(--gradient-primary);color:#fff!important;padding:0 24px;height:44px;font-weight:500}.filter-container[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;background:#4361ee0d;padding:16px;border-radius:12px}.filter-field[_ngcontent-%COMP%]{flex:1}.table-container[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;margin:24px 0;box-shadow:0 2px 16px #00000014}.full-table[_ngcontent-%COMP%]{width:100%}.no-results[_ngcontent-%COMP%]{text-align:center;padding:32px;color:var(--text-secondary);font-size:1.1rem}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.6}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.text-center[_ngcontent-%COMP%]{text-align:center}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.new-button[_ngcontent-%COMP%]{width:100%}.filter-container[_ngcontent-%COMP%]{flex-direction:column}.filter-field[_ngcontent-%COMP%]{width:100%}}"]})};export{ft as CustomerListComponent};
