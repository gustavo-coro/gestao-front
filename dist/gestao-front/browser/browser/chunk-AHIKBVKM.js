import{A,B,F as G,G as j,b as E,d as g,f as S,g as b,j as y,l as F,m as I,o as O,q as P,s as L,t as k,u as q,x as R}from"./chunk-7FJALMHQ.js";import{a as N,f as w,g as z}from"./chunk-XAYXIGTK.js";import{c as C,d as v}from"./chunk-GN7WWOTY.js";import{Da as m,Ha as p,Oa as x,Ta as c,Za as l,cd as D,dd as T,ed as U,fc as h,fd as V,gb as e,hb as t,ib as d,jc as M,ob as _,zb as r}from"./chunk-4P6AN2NL.js";function J(i,o){i&1&&(e(0,"mat-error"),r(1," E-mail \xE9 obrigat\xF3rio "),t())}function K(i,o){i&1&&(e(0,"mat-error"),r(1," E-mail inv\xE1lido "),t())}function Q(i,o){i&1&&(e(0,"mat-error"),r(1," Senha \xE9 obrigat\xF3ria "),t())}var H=class i{constructor(o,n,a){this.fb=o;this.api=n;this.router=a}loginForm;ngOnInit(){this.loginForm=this.fb.group({email:["",[g.required,g.email]],senha:["",g.required]})}onSubmit(){console.log("Enviando para a API:",this.loginForm.value),!this.loginForm.invalid&&this.api.login(this.loginForm.value).subscribe({next:o=>{localStorage.setItem("token",o.token);let n=this.router.parseUrl(this.router.url).queryParams.returnUrl||"/home";this.router.navigateByUrl(n)},error:o=>{console.error("Erro detalhado do backend:",o.error.message)}})}static \u0275fac=function(n){return new(n||i)(p(P),p(z),p(C))};static \u0275cmp=x({type:i,selectors:[["app-login"]],decls:30,vars:5,consts:[[1,"login-card"],[1,"login-header"],["src","assets/logo.png","alt","Company Logo",1,"logo"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","email","type","email","required",""],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","senha","type","password","required",""],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],[1,"login-footer"],[1,"redirect-text"],["routerLink","/register",1,"redirect-link"]],template:function(n,a){if(n&1&&(e(0,"mat-card",0)(1,"div",1),d(2,"img",2),e(3,"h2"),r(4,"Acessar Sistema"),t()(),e(5,"form",3),_("ngSubmit",function(){return a.onSubmit()}),e(6,"mat-form-field",4)(7,"mat-label"),r(8,"E-mail"),t(),d(9,"input",5),e(10,"mat-icon",6),r(11,"email"),t(),c(12,J,2,0,"mat-error",7)(13,K,2,0,"mat-error",7),t(),e(14,"mat-form-field",4)(15,"mat-label"),r(16,"Senha"),t(),d(17,"input",8),e(18,"mat-icon",6),r(19,"lock"),t(),c(20,Q,2,0,"mat-error",7),t(),e(21,"button",9)(22,"mat-icon"),r(23,"login"),t(),r(24," Entrar "),t()(),e(25,"div",10)(26,"p",11),r(27," N\xE3o tem conta? "),e(28,"a",12),r(29,"Cadastre-se"),t()()()()),n&2){let s,u,f;m(5),l("formGroup",a.loginForm),m(7),l("ngIf",(s=a.loginForm.get("email"))==null?null:s.hasError("required")),m(),l("ngIf",(u=a.loginForm.get("email"))==null?null:u.hasError("email")),m(7),l("ngIf",(f=a.loginForm.get("senha"))==null?null:f.hasError("required")),m(),l("disabled",a.loginForm.invalid)}},dependencies:[M,h,L,y,E,S,b,O,F,I,v,w,N,B,A,k,q,R,j,G,T,D,V,U],styles:[".login-card[_ngcontent-%COMP%]{max-width:450px;margin:2rem auto;padding:2rem;border-radius:16px;box-shadow:0 4px 20px #00000014;text-align:center}.login-header[_ngcontent-%COMP%]{margin-bottom:2rem}.login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:60px;margin-bottom:1rem}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-color);margin:0;font-size:1.5rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-field[_ngcontent-%COMP%]{width:100%}.login-button[_ngcontent-%COMP%]{height:50px;font-weight:500;margin-top:.5rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;color:var(--danger-color);margin-top:1rem;font-size:.9rem}.login-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:1rem}.redirect-text[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.redirect-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500}.forgot-password[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;color:var(--text-secondary);text-decoration:none;font-size:.9rem}.forgot-password[_ngcontent-%COMP%]:hover{color:var(--primary-color)}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}}"]})};export{H as LoginComponent};
